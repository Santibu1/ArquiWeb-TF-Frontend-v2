<app-sub-navbar-usuario></app-sub-navbar-usuario>

<div class="form-container">
    <h2>Crear Solicitud de Comunidad</h2>

    <form #f="ngForm" (ngSubmit)="enviarSolicitud()">

        <label>Nombre de la Comunidad</label>
        <input
                type="text"
                [(ngModel)]="solicitud.nombreComunidad"
                name="nombreComunidad"
                required
                minlength="2"
                maxlength="50"
                #nombre="ngModel"
        />
        <div class="error" *ngIf="nombre.invalid && nombre.touched">
            <small *ngIf="nombre.errors?.['required']">El nombre es obligatorio.</small>
            <small *ngIf="nombre.errors?.['minlength']">Debe tener al menos 2 caracteres.</small>
            <small *ngIf="nombre.errors?.['maxlength']">Máximo 50 caracteres.</small>
        </div>

        <label>Ubicación</label>
        <input
                type="text"
                [(ngModel)]="solicitud.ubicacion"
                name="ubicacion"
                required
                minlength="2"
                maxlength="50"
                #ubicacion="ngModel"
        />
        <div class="error" *ngIf="ubicacion.invalid && ubicacion.touched">
            <small *ngIf="ubicacion.errors?.['required']">La ubicación es obligatoria.</small>
        </div>

        <label>Descripción</label>
        <textarea
                [(ngModel)]="solicitud.descripcion"
                name="descripcion"
                required
                minlength="2"
                maxlength="50"
                #descripcion="ngModel"
        ></textarea>

        <div class="error" *ngIf="descripcion.invalid && descripcion.touched">
            <small *ngIf="descripcion.errors?.['required']">La descripción es obligatoria.</small>
            <small *ngIf="descripcion.errors?.['minlength']">Debe tener al menos 2 caracteres.</small>
            <small *ngIf="descripcion.errors?.['maxlength']">Máximo 50 caracteres.</small>
        </div>

        <button
                type="submit"
                [disabled]="f.invalid || cargando"
        >
            {{ cargando ? 'Enviando...' : 'Enviar Solicitud' }}
        </button>

        <p class="mensaje">{{ mensaje }}</p>
    </form>
</div>