<app-sub-navbar-usuario></app-sub-navbar-usuario>

<div class="user-home-dashboard" *ngIf="usuarioLogueado; else cargando">

    <div class="user-greeting-section">
        <h1>Bienvenido de nuevo, {{ usuarioLogueado.nombreUsuario }}</h1>

        <div class="user-stats-card">
            <div class="stat-item">
                <span class="stat-value">{{ usuarioLogueado.ecobits }}</span>
                <span class="stat-label">Puntos acumulados</span>
            </div>
        </div>
    </div>

    <!-- ğŸ”¥ ECO TIP - Reemplaza la secciÃ³n de Recientes -->
    <div class="eco-tip-card">
        <h3>ğŸ’¬ EcoChat â€“ Consejo del DÃ­a</h3>

        <p *ngIf="cargandoEcoTip" class="loading">
            Obteniendo tu eco-consejo...
        </p>

        <p *ngIf="!cargandoEcoTip" class="eco-text">
            {{ ecoTip }}
        </p>

        <button class="btn-refrescar" (click)="cargarEcoTip()" [disabled]="cargandoEcoTip">
            ğŸ”„ Nuevo consejo
        </button>
    </div>

    <!-- MOSTRAR SOLO SI TIENE PLAN ACTIVO -->
    <div *ngIf="planActivo === true" class="plan-activo">
        <p>ğŸ”¥ Plan activo â€“ {{ diasRestantes }} dÃ­as restantes</p>
        <p>Inicio: {{ fechaInicio }}</p>
        <p>Finaliza: {{ fechaFin }}</p>
    </div>

    <!-- SI NO TIENE PLAN (NULL O FALSE) -->
    <div *ngIf="planActivo !== true" class="plan-inactivo">
        <p>â— Tu plan ha expirado o no tienes uno activo.</p>
    </div>

</div>

<ng-template #cargando>
    <div class="loading-container">
        <p *ngIf="!errorCarga">Cargando tu perfil...</p>
        <p *ngIf="errorCarga" class="error-message">{{ errorCarga }}</p>
    </div>
</ng-template>
